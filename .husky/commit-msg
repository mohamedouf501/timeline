#!/bin/sh
 
echo "ğŸ“ Checking commit message format using commitlint..."

COMMIT_MSG=$(cat "$1")

if echo "$COMMIT_MSG" | grep -q '\[skip ci\]'; then
  echo "âš ï¸  Skipping commitlint for semantic-release commit."
  exit 0
fi


npx --no -- commitlint --edit "$1"
if [ $? -ne 0 ]; then
  echo "âŒ Commit message does not follow Conventional Commits!"
  echo "ğŸ’¡ Example formats:"
  echo "   â¤ feat: add timeline creation API"
  echo "   â¤ fix: resolve event timestamp bug"
  echo "   â¤ chore: update dependencies"
  echo ""
  echo "ğŸš« Commit rejected!"
  exit 1
fi

echo "âœ… Commit message is valid. Proceeding with commit..."
